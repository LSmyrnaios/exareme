<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" ng-app="myApp" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en" ng-app="myApp" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en" ng-app="myApp" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en" ng-app="myApp" class="no-js" xmlns="http://www.w3.org/1999/html"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>ExaView Demo</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="bower_components/html5-boilerplate/dist/css/normalize.css">
  <link rel="stylesheet" href="bower_components/html5-boilerplate/dist/css/main.css">
  <link rel="stylesheet" href="app.css">
  <script src="bower_components/angular/angular.js"></script>
  <script src="bower_components/angular-route/angular-route.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script language="JavaScript" type="text/javascript" src="/js/jquery-1.2.6.min.js"></script>
  <script src="bower_components/html5-boilerplate/dist/js/vendor/modernizr-2.8.3.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/highcharts-more.js"></script>
  <script src="https://code.highcharts.com/highcharts-3d.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
</head>
<body>
  <!--<ul class="menu">-->
  <!--<li><a href="#!/view1">view1</a></li>-->
  <!--<li><a href="#!/view2">view2</a></li>-->
  <!--</ul><br>-->
  <section>
    <div ng-controller="ExaController as exaCtrl">
      <table width="100%" border="0">
        <tr><td colspan="2">
          <h2>Federation Demo </h2>
        </td></tr>
        <tr valign="top">
          <td width="40%">
            <div style="margin: 10pt;">
              <button type="button" ng-click="exaCtrl.getVariables()">Get available variables</button><br>
              <button type="button" ng-click="exaCtrl.getDatasets()">Get available datasets</button>
            </div>

            <div>
              <select ng-model="exaCtrl.selectedAlgo" ng-options="x.name for x in exaCtrl.algorithms track by x.name"
              ng-change=exaCtrl.toggleSubmitButton()>
            </select>
          </div>


          <div>
            <form>
              <!-- For each parameter, switch on parameter name -->
              <div ng-repeat="parameter in exaCtrl.selectedAlgo.parameters track by $index" ng-switch on="parameter.type">
                <div style="margin: 10pt;">{{parameter.name + ":"}}<br>
                  <!-- dataset  -->
                  <select id="selectlist" ng-switch-when="dataset" ng-model="parameter.value" multiple>
                    <option value="" disabled hide ng-repeat-start="x in exaCtrl.datasets">{{"* " + x.NodeName +" *"}}</option>
                    <option ng-repeat-end ng-repeat="d in x.Datasets" ng-value="d">{{d}}</option>
                    <!--$('#selectlist option[value=0]').remove();
                    {{x.NodeName + " - " + d | limitTo: d.length + x.NodeName.length +2}}-->
                  </select>
                  <!-- integer  -->
                  <input type="number" ng-switch-when="integer" ng-model="parameter.value"/>
                  <!-- variable  -->
                  <p id="selectlist" style="padding: 0;margin: 0;" ng-switch-when="variable" ng-switch on="parameter.number">
                    <select ng-switch-when="0-n" size="10" ng-model="parameter.value" multiple>
                      <option value="">---None---</option>
                      <option ng-repeat="x in exaCtrl.variables | validType: parameter.vartype | orderBy : x.name" value='{{x[0]}}'>{{x[0]+" [" + x[1] +"]"}}</option>
                    </select>
                    <select ng-switch-when="0-1" size="10" ng-model="parameter.value">
                      <option value="">---None---</option>
                      <option ng-repeat="x in exaCtrl.variables | validType: parameter.vartype | orderBy : x.name" value='{{x[0]}}'>{{x[0]+" [" + x[1] +"]"}}</option>
                    </select>
                    <select ng-switch-when="1-n" size="10" ng-model="parameter.value" multiple>
                      <option value="" disabled>---Please choose---</option>
                      <option ng-repeat="x in exaCtrl.variables | validType: parameter.vartype | orderBy : x.name" value='{{x[0]}}'>{{x[0]+" [" + x[1] +"]"}}</option>
                    </select>
                    <select ng-switch-default size="10" ng-model="parameter.value">
                      <option value="" disabled>---Please choose---</option>
                      <option ng-repeat="x in exaCtrl.variables | validType: parameter.vartype | orderBy : x.name" value='{{x[0]}}'>{{x[0]+" [" + x[1] +"]"}}</option>
                    </select>
                  </p>
                  <!-- default  -->
                  <input ng-switch-default type="text" ng-model="parameter.value"/>
                </div>
              </div>
              <div ng-show=exaCtrl.showSubmit>
                <button type="button" ng-click="exaCtrl.submit(exaCtrl.selectedAlgo)">Submit</button>
              </div>
            </form>
          </div>

          <div ng-show=exaCtrl.showVariables>
            <h3>Variables</h3>
            <div ng-repeat="parameter in exaCtrl.variables track by $index">
              {{parameter[0] + " [" + parameter[1] + "]"}}<br>
            </div>
          </div>
        </div>
      </td>
      <td width="100%">
        <div>
          <h2>Result</h2>
          <table>
            <tbody>
              <div id="container" style="width:90%;" ></div>
              <tr>
                <pre>{{exaCtrl.result | json }}</pre>
              </tr>
            </tbody>
          </table>
        </div>
      </td>
      <td colspan="2"></td>
    </tr>
  </table>
</div>
</section>

  <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
  <![endif]-->

  <!--<div ng-view></div>-->

  <!--<div>Angular seed app: v<span app-version></span></div>-->

  <!-- In production use:
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/x.x.x/angular.min.js"></script>
  -->
  <script src="app.js"></script>
  <script src="view1/view1.js"></script>
  <script src="view2/view2.js"></script>
  <script src="components/version/version.js"></script>
  <script src="components/version/version-directive.js"></script>
  <script src="components/version/interpolate-filter.js"></script>
</body>
</html>
